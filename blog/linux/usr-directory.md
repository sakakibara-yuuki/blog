---
title: "/usr/bin vs /usr/local/bin vs ~/.local/bin"
author: "sakakibara"
description: "上手くいかないことがありましたが、コミュニティに質問して助けてもらいました！"
heroImage: '/blog-placeholder-3.jpg'
pubDate: 2024-03-06
tags: ["linux", "directory"]
---

# /usr/bin vs /usr/local/bin vs ~/.local/bin
/usr/bin や /usr/local/binなどのディレクトリレイアウトについて解説する.
linuxを使っていく上で基本となる知識ではあるが, たまにしか遭遇しないため, すぐに忘れてしまう.

## Contents
## /usr/bin
`/usr/bin`は**システム全体で使用される**バイナリファイル(ELF)を配置する.
多くのlinuxディストリビューションでは, `apt`, `dnf`, `pacman`などのシステム・パッケージマネージャーでinstallされたプログラムはここに配置される.

ディストリビューションのシステム・パッケージマネージャーでinstallされるプログラムであるため, システム管理者(自分)が手を加えるべきではなく, 各パッケージマネージャーを通じて管理される.

## /usr/local/bin
`/usr/local/bin`は**システム全体で使用され, 手動でinstallされる**バイナリファイルを配置する.
システムの標準のアップデートやパッケージマネージャーによる管理に影響を与えない(また, 影響を与えない).

特定のユーザーやプロジェクトに必要なカスタムスクリプトやバイナリファイルを配置することで, システムの他の部分を汚染することなく, システム全体で使用できる.

## ~/.local/bin
`~/.local/bin`は**ユーザー専用として使用される**バイナリファイルを配置する.
システム全体で使用されるのではなく, そのユーザーのみが使用するプログラムやスクリプトを配置するためのディレクトリである.

システムの他のユーザーに影響を与えない.

`/usr/local/bin`と同様に手動でinstallされるプログラムや`pip`や`npm`などのユーザー単位でのpackage managerでinstallされるプログラムが配置される.
`pip install --user`でinstallされたpythonパッケージは通常, `~/.local/bin`に配置される.

## /usr/bin vs /usr/local/bin vs ~/.local/bin

まとめよう.
| ディレクトリ     | 対象範囲     | 用途                                                                  |
| ---              | ---          | ---                                                                   |
| `/usr/bin`       | システム全体 | システム全体で使用されるバイナリファイルを配置する                    |
| `/usr/local/bin` | システム全体 | システム全体で使用され, 手動でinstallされるバイナリファイルを配置する |
| `~/.local/bin`   | ユーザー専用 | ユーザー専用として使用されるバイナリファイルを配置する                |


このように見てみると, `/usr/`はシステム全体で使用されることを意味し,
`local`は手動でinstallされることを意味する...
といったところだろうか.

なお, `/bin`というディレクトリもあるが, これは基本的なシステムコマンド, つまり, **システムのブートプロセスや基本的な操作**に必要なコマンドが配置される.
システムを起動させたり, 最小限の操作を行うためのコマンドが配置され, シングルユーザーモードでも使用できるようになっている.
そのため, `/usr/bin`とは異なり, システムの起動時に必要なコマンドが配置される.
`/usr/bin`はシステムが起動した後に使用されるコマンドが配置される.

なお, 現在では`/bin`は`/usr/bin`へのシンボリックリンクが格納されていることが多い.
このようにシンボリックリンクを使用することで, システム全体が`/usr/bin`に統合され, 管理が簡素化される傾向にある.

同様のことが`/sbin`や`/usr/sbin`にも言える.
`/sbin`はシステム管理者が使用するコマンドが配置される.
システムの起動やネットワーク設定, ファイルシステム, ブートプロセスの管理などに関するツールが配置されている.
多くは`/bin`と同じだが, `/bin`と異なるのは`/bin`はシステムの一般的な操作に使われる基本的なコマンドであり, 全てのユーザーが使用できるが, `/sbin`は**システム管理に関するコマンド**であり, 主にrootやシステム管理者が使用する.

`/usr/sbin`は`/sbin`と同様にシステム管理に関するコマンドが配置されるが, `/usr`以下に配置されるため, システム全体で使用されるコマンドとして扱われる.
より, 具体的には通常のシステム運用中に必要となる管理ツールやデーモン関連のコマンドが配置される.
例えば, `apache2`や`postfix`などのデーモンを管理するためのコマンドが配置される.
システム・パッケージマネージャーなどからinstallされる追加ツールなどがここに配置される.

また, `/sbin`と異なり, システムが完全に起動した後に実行されることを想定されている.

`/bin`と`/usr/bin`がシンボリックリンクにより統合されるように,
`/sbin`と`/usr/sbin`も最新のlinuxディストリビューションではシンボリックリンクにより統合される傾向にある.

`/sbin`や`/usr/sbin`はシステム管理のために使用するため, 一般ユーザーの`$PATH`には通常含まれていない.
(自分の環境では`/usr/local/sbin`という`$PATH`が含まれていた.)

<!-- `/usr/local/bin` はそのlinuxを使用している(rootに限らず)`usr`が共通で使用できるlocalな(systemではない)プログラムです。 -->
<!-- `pacman -S`などのパッケージマネージャーでインストールしたプログラムは通常ここに保存されます。 -->
<!-- もちろん格納されている(すべき)なのはバイナリです。 -->
<!---->
<!-- その他の紛らわしいディレクトリとして`/bin`,`/sbin`, `/usr/bin`, `/usr/sbin`, `/usr/local`, ...などがある。 -->
<!-- 基本的に`/usr`直下でないものはrootユーザーがアクセスする権限を持つ。システムを維持するために必要なコマンドやプログラムが格納される。linuxをインストールした直後に際に展開される。   -->
<!-- `/usr`直下のものはrootユーザーに限らず一般の`usr`が使用できる。 -->
